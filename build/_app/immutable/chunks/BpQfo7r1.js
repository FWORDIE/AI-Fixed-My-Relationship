import{f as _,r as m,g as h,p as y,h as b,i as p,j as d,k as S,m as T,o as A,q as E,t as w,E as M,v as D,H as F,w as N,x,y as v,z as B,A as R,b as C,B as I,S as O,d as g,C as q,D as H,F as L,G as U,I as Y}from"./Ch_425GH.js";import{s as j,g as z}from"./CN5wfU_h.js";class G{anchor;#s=new Map;#t=new Map;#e=new Map;#r=new Set;#a=!0;constructor(e,a=!0){this.anchor=e,this.#a=a}#i=()=>{var e=_;if(this.#s.has(e)){var a=this.#s.get(e),s=this.#t.get(a);if(s)m(s),this.#r.delete(a);else{var i=this.#e.get(a);i&&(this.#t.set(a,i.effect),this.#e.delete(a),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),s=i.effect)}for(const[r,n]of this.#s){if(this.#s.delete(r),r===e)break;const f=this.#e.get(n);f&&(h(f.effect),this.#e.delete(n))}for(const[r,n]of this.#t){if(r===a||this.#r.has(r))continue;const f=()=>{if(Array.from(this.#s.values()).includes(r)){var u=document.createDocumentFragment();T(n,u),u.append(b()),this.#e.set(r,{effect:n,fragment:u})}else h(n);this.#r.delete(r),this.#t.delete(r)};this.#a||!s?(this.#r.add(r),y(n,f,!1)):f()}}};#n=e=>{this.#s.delete(e);const a=Array.from(this.#s.values());for(const[s,i]of this.#e)a.includes(s)||(h(i.effect),this.#e.delete(s))};ensure(e,a){var s=_,i=A();if(a&&!this.#t.has(e)&&!this.#e.has(e))if(i){var r=document.createDocumentFragment(),n=b();r.append(n),this.#e.set(e,{effect:p(()=>a(n)),fragment:r})}else this.#t.set(e,p(()=>a(this.anchor)));if(this.#s.set(s,e),i){for(const[f,c]of this.#t)f===e?s.skipped_effects.delete(c):s.skipped_effects.add(c);for(const[f,c]of this.#e)f===e?s.skipped_effects.delete(c.effect):s.skipped_effects.add(c.effect);s.oncommit(this.#i),s.ondiscard(this.#n)}else d&&(this.anchor=S),this.#i()}}function J(t,e,a=!1){d&&E();var s=new G(t),i=a?M:0;function r(n,f){if(d){const u=D(t)===F;if(n===u){var c=N();x(c),s.anchor=c,v(!1),s.ensure(n,f),v(!0);return}}s.ensure(n,f)}w(()=>{var n=!1;e((f,c=!0)=>{n=!0,r(c,f)}),n||r(!1,null)},i)}function k(t,e){return t===e||t?.[O]===e}function K(t={},e,a,s){return B(()=>{var i,r;return R(()=>{i=r,r=[],C(()=>{t!==a(...r)&&(e(t,...r),i&&k(a(...i),t)&&e(null,...i))})}),()=>{I(()=>{r&&k(a(...r),t)&&e(null,...r)})}}),t}let o=!1,l=Symbol();function Q(t,e,a){const s=a[e]??={store:null,source:q(void 0),unsubscribe:g};if(s.store!==t&&!(l in a))if(s.unsubscribe(),s.store=t??null,t==null)s.source.v=void 0,s.unsubscribe=g;else{var i=!0;s.unsubscribe=j(t,r=>{i?s.source.v=r:Y(s.source,r)}),i=!1}return t&&l in a?z(t):H(s.source)}function V(t,e){return t.set(e),e}function W(){const t={};function e(){L(()=>{for(var a in t)t[a].unsubscribe();U(t,l,{enumerable:!1,value:!0})})}return[t,e]}function X(t){var e=o;try{return o=!1,[t(),o]}finally{o=e}}export{G as B,V as a,K as b,X as c,W as d,J as i,Q as s};
